var mouse,__reflect=this&&this.__reflect||function(a,b,c){a.__class__=b,c?c.push(b):c=[b],a.__types__=a.__types__?c.concat(a.__types__):c};(function(a){var b=function(){function a(){}return a.MOUSE_MOVE="mouseMove",a.ROLL_OVER="rollOver",a.ROLL_OUT="rollOut",a}();a.MouseEvent=b,__reflect(b.prototype,"mouse.MouseEvent")})(mouse||(mouse={}));var mouse;(function(a){var b,c,d;egret.DisplayObject.prototype.tooltipText="",egret.DisplayObject.prototype.tooltipPosition="below",a.enable=function(f){d="Windows PC"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os,c=f,b=[c],(()=>{function b(a,b,d){return b.visible?b.getTransformedBounds(c).containsPoint(a)?[d,b]:null:null}function d(a,c,e){if(!c.visible)return null;for(var f=c.$children.length-1;0<=f;f--){var g,h=c.$children[f],i=egret.getQualifiedClassName(h);if(e+=" > "+i+"("+h.$hashCode+")",g=h instanceof egret.DisplayObjectContainer&&"EgretArmatureDisplay"!==i?0<h.tooltipText.length?b(a,h,e):d(a,h,e):b(a,h,e),g)return c.$touchChildren?g:[e,c]}return null}function e(a,b,d){return"TOOLTIP_HIDE"===b?void c.dispatchEvent(new egret.Event(b)):void(1>a.tooltipText.length||(clearTimeout(f),f=setTimeout(function(){c.dispatchEvent(new egret.Event(b,!1,!1,{displayObject:a,x:d.x,y:d.y}))},50)))}var f,g={},h={},i=function(a,b){var c;return function(){var d=this,e=arguments;c&&clearTimeout(c),c=setTimeout(function(){c=null,a.apply(d,e)},b)}}(function(b){var f=c.$screen.webTouchHandler.getLocation(b),i=d(f,c,egret.getQualifiedClassName(c));if(i&&(console.log(">>>",i[0]),i=i[1]),i&&i!==c){for(;i!==c&&!(0<i.tooltipText.length);)i=i.parent;switch(b.type){case"mousemove":if(!g[i.$hashCode]){function b(){i.removeEventListener(a.MouseEvent.ROLL_OUT,b,null),e(i,"TOOLTIP_HIDE",f),delete g[i.$hashCode],clearTimeout(h[i.$hashCode]),delete h[i.$hashCode]}e(i,"TOOLTIP_SHOW",f),i.addEventListener(a.MouseEvent.ROLL_OUT,b,null),g[i.$hashCode]=!0;const c=setTimeout(b,2e3);h[i.$hashCode]=c}break;case"mouseleave":break;case"mousedown":b.stopPropagation();}}},25);c.$screen.webTouchHandler.canvas.addEventListener("mousemove",i),c.$screen.webTouchHandler.canvas.addEventListener("mouseleave",i),c.$screen.webTouchHandler.canvas.addEventListener("mousedown",i)})();var g=function(e,f){var g=!1,h=[],i=function(b){b.isRollOver||(egret.TouchEvent.dispatchTouchEvent(b,a.MouseEvent.ROLL_OVER,!1,!1,e,f,null),b.isRollOver=!0),b.buttonModeForMouse&&(g=!0)},j=function(b){b.isRollOver&&(egret.TouchEvent.dispatchTouchEvent(b,a.MouseEvent.ROLL_OUT,!1,!1,e,f,null),delete b.isRollOver)},k=egret.DisplayObjectContainer.prototype.$hitTest,l=0;egret.DisplayObjectContainer.prototype.$hitTest=function(a,b){if(!this.$touchEnabled&&!this.$touchChildren&&1>this.tooltipText.length)return null;this.$touchChildren||l++;var c=k.call(this,a,b);return this.$touchChildren||l--,0==l&&(null==c?j(this):(i(this),h.push(this))),c};var m=c.$hitTest(e,f);if(null!=m&&(i(m),h.push(m)),b.forEach(function(a){0>h.indexOf(a)&&j(a)}),b=h,d)try{var n=c.$displayList.renderBuffer.surface;n.style.cursor=g?"pointer":"auto"}catch(a){}egret.DisplayObjectContainer.prototype.$hitTest=k},h=NaN,i=NaN,j=egret.sys.TouchHandler.prototype.onTouchMove;egret.sys.TouchHandler.prototype.onTouchMove=function(a,b,c){j.call(this,a,b,c)};var k=egret.sys.TouchHandler.prototype.onTouchBegin;egret.sys.TouchHandler.prototype.onTouchBegin=function(a,b,c){k.call(this,a,b,c)};var l=!1,m=egret.web.WebTouchHandler.prototype.getLocation;egret.web.WebTouchHandler.prototype.getLocation=function(a){return l=0<a.buttons,m.call(this,a)};var n=egret.sys.TouchHandler.prototype.onTouchEnd;egret.sys.TouchHandler.prototype.onTouchEnd=function(b,d,f){n.call(this,b,d,f),l||(h=b,i=d,e&&egret.TouchEvent.dispatchTouchEvent(c,a.MouseEvent.MOUSE_MOVE,!0,!0,b,d,f,!0),g(h,i))},document.querySelector("canvas").addEventListener("mouseleave",function(){g(NaN,NaN)})},a.setButtonMode=function(a,b){a.buttonModeForMouse=b};var e=!1;a.setMouseMoveEnabled=function(a){e=a}})(mouse||(mouse={}));